(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else {
		var a = factory();
		for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
	}
})(typeof self !== 'undefined' ? self : this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Timeline = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

__webpack_require__(1);

var _core = __webpack_require__(2);

var _core2 = _interopRequireDefault(_core);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Timeline = function () {
    function Timeline(opt) {
        _classCallCheck(this, Timeline);

        this.queue = [new _core2.default(opt)];
    }

    _createClass(Timeline, [{
        key: "to",
        value: function to(opt) {
            this.queue.push(new _core2.default(opt));
            return this;
        }
    }, {
        key: "play",
        value: function play() {
            var queue = this.queue;
            this.queue.map(function (core, index) {
                if (queue[index + 1]) {
                    var callback = core.onEnd;
                    core.onEnd = function () {
                        callback && callback();
                        queue[index + 1].play();
                        core.onEnd = callback;
                    };
                }
            });
            this.queue.length && this.queue[0].play();
        }
    }, {
        key: "reset",
        value: function reset() {
            for (var i = this.queue.length - 1; i >= 0; i--) {
                this.queue[i].reset();
            }
        }
    }, {
        key: "stop",
        value: function stop() {
            this.queue.map(function (core) {
                core.stop();
            });
        }
    }, {
        key: "end",
        value: function end() {
            this.queue.map(function (core) {
                core._end();
            });
        }
    }]);

    return Timeline;
}();

Timeline.path = function (path) {
    var pathSVG = document.createElementNS("http://www.w3.org/2000/svg", "path");
    pathSVG.setAttributeNS(null, "d", path);

    return {
        svg: pathSVG,
        type: "path"
    };
};

exports.default = Timeline;
exports.Timeline = Timeline;

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


(function () {
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback, element) {
        var currTime = new Date().getTime();
        var timeToCall = Math.max(0, 16 - (currTime - lastTime));
        var id = window.setTimeout(function () {
            callback(currTime + timeToCall);
        }, timeToCall);
        lastTime = currTime + timeToCall;
        return id;
    };

    if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {
        clearTimeout(id);
    };
})();

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _tween = __webpack_require__(3);

var _tween2 = _interopRequireDefault(_tween);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Core = function () {
    function Core(opt) {
        _classCallCheck(this, Core);

        this._init(opt);
        this.state = 'init';
    }

    _createClass(Core, [{
        key: '_init',
        value: function _init(opt) {
            this.target = opt.target;
            this._initValue(opt.value);
            this.duration = opt.duration || 1000;
            this.timingFunction = opt.timingFunction || 'linear';
            this.renderFunction = opt.render || this._defaultFunc;

            /* Events */
            this.onPlay = opt.onPlay;
            this.onEnd = opt.onEnd;
            this.onStop = opt.onStop;
            this.onReset = opt.onReset;
        }
    }, {
        key: '_initValue',
        value: function _initValue(value) {
            this.value = [];
            if (Array.isArray(value)) {
                Array.isArray(value[0]) ? this._initMutipleValue(value) : this._initSimgleValue(value);
            } else if ((typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' && value.type === 'path') {
                this._initPathValue(value);
            }
        }
    }, {
        key: '_initPathValue',
        value: function _initPathValue(value) {
            this.value.push({
                start: 0,
                end: value.svg.getTotalLength(),
                type: 'path',
                svg: value.svg
            });
        }
    }, {
        key: '_initSimgleValue',
        value: function _initSimgleValue(value) {
            this.value.push({
                start: parseFloat(value[0]),
                end: parseFloat(value[1]),
                type: 'simgle'
            });
        }
    }, {
        key: '_initMutipleValue',
        value: function _initMutipleValue(values) {
            var _this = this;

            values.forEach(function (value) {
                _this.value.push({
                    start: parseFloat(value[0]),
                    end: parseFloat(value[1]),
                    type: 'mutiple'
                });
            });
        }
    }, {
        key: '_defaultFunc',
        value: function _defaultFunc() {
            console.warn('no render function!');
        }
    }, {
        key: '_renderEndState',
        value: function _renderEndState() {
            var d = this.duration,
                func = _tween2.default[this.timingFunction] || _tween2.default['linear'];
            this._renderFunction(d, d, func);
        }
    }, {
        key: '_renderInitState',
        value: function _renderInitState() {
            var d = this.duration,
                func = _tween2.default[this.timingFunction] || _tween2.default['linear'];
            this._renderFunction(0, d, func);
        }
    }, {
        key: '_renderStopState',
        value: function _renderStopState(t) {
            var d = this.duration,
                func = _tween2.default[this.timingFunction] || _tween2.default['linear'];
            this._renderFunction(t, d, func);
        }
    }, {
        key: '_loop',
        value: function _loop() {
            var t = Date.now() - this.beginTime,
                d = this.duration,
                func = _tween2.default[this.timingFunction] || _tween2.default['linear'];

            if (this.state === 'end' || t >= d) {
                this._end();
            } else if (this.state === 'stop') {
                this._stop(t);
            } else if (this.state === 'init') {
                this._reset();
            } else {
                this._renderFunction(t, d, func);
                window.requestAnimationFrame(this._loop.bind(this));
            }
        }
    }, {
        key: '_renderFunction',
        value: function _renderFunction(t, d, func) {
            var values = this.value.map(function (value) {
                var curValue = func(t, value.start, value.end - value.start, d);
                return value.type === 'path' ? value.svg.getPointAtLength(curValue) : curValue;
            });
            this.renderFunction.apply(this, values);
        }
    }, {
        key: '_play',
        value: function _play() {
            this.state = 'play';
            this.onPlay && this.onPlay.call(this);

            this.beginTime = Date.now();
            var loop = this._loop.bind(this);
            window.requestAnimationFrame(loop);
        }
    }, {
        key: '_end',
        value: function _end() {
            this.state = 'end';
            this._renderEndState();
            this.onEnd && this.onEnd.call(this);
        }
    }, {
        key: '_stop',
        value: function _stop(t) {
            this.state = 'stop';
            this._renderStopState(t);
            this.onStop && this.onStop.call(this);
        }
    }, {
        key: '_reset',
        value: function _reset() {
            this.state = 'init';
            this._renderInitState();
            this.onReset && this.onReset.call(this);
        }
    }, {
        key: 'play',
        value: function play() {
            this._play();
        }
    }, {
        key: 'end',
        value: function end() {
            this.state === 'play' ? this.state = 'end' : this._end();
        }
    }, {
        key: 'stop',
        value: function stop() {
            if (this.state === 'play') {
                this.state = 'stop';
            } else {
                this.state = 'stop';
                this.onStop && this.onStop();
            }
        }
    }, {
        key: 'reset',
        value: function reset() {
            this.state === 'play' ? this.state = 'init' : this._reset();
        }
    }]);

    return Core;
}();

exports.default = Core;

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
    value: true
});
/*
 * t: current time（当前时间）；
 * b: beginning value（初始值）；
 * c: change in value（变化量）；
 * d: duration（持续时间）。
 * Get effect on 'http://easings.net/zh-cn'
 */

var Tween = {
    linear: function linear(t, b, c, d) {
        return c * t / d + b;
    },
    // Quad
    easeIn: function easeIn(t, b, c, d) {
        return c * (t /= d) * t + b;
    },
    easeOut: function easeOut(t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b;
    },
    easeInOut: function easeInOut(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t + b;
        return -c / 2 * (--t * (t - 2) - 1) + b;
    },
    // Cubic
    easeInCubic: function easeInCubic(t, b, c, d) {
        return c * (t /= d) * t * t + b;
    },
    easeOutCubic: function easeOutCubic(t, b, c, d) {
        return c * ((t = t / d - 1) * t * t + 1) + b;
    },
    easeInOutCubic: function easeInOutCubic(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t + 2) + b;
    },
    // Quart
    easeInQuart: function easeInQuart(t, b, c, d) {
        return c * (t /= d) * t * t * t + b;
    },
    easeOutQuart: function easeOutQuart(t, b, c, d) {
        return -c * ((t = t / d - 1) * t * t * t - 1) + b;
    },
    easeInOutQuart: function easeInOutQuart(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
    },
    // Quint
    easeInQuint: function easeInQuint(t, b, c, d) {
        return c * (t /= d) * t * t * t * t + b;
    },
    easeOutQuint: function easeOutQuint(t, b, c, d) {
        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
    },
    easeInOutQuint: function easeInOutQuint(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
    },
    // Sine
    easeInSine: function easeInSine(t, b, c, d) {
        return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
    },
    easeOutSine: function easeOutSine(t, b, c, d) {
        return c * Math.sin(t / d * (Math.PI / 2)) + b;
    },
    easeInOutSine: function easeInOutSine(t, b, c, d) {
        return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
    },
    // Expo
    easeInExpo: function easeInExpo(t, b, c, d) {
        return t == 0 ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
    },
    easeOutExpo: function easeOutExpo(t, b, c, d) {
        return t == d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
    },
    easeInOutExpo: function easeInOutExpo(t, b, c, d) {
        if (t == 0) return b;
        if (t == d) return b + c;
        if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
    },
    // Circ
    easeInCirc: function easeInCirc(t, b, c, d) {
        return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
    },
    easeOutCirc: function easeOutCirc(t, b, c, d) {
        return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
    },
    easeInOutCirc: function easeInOutCirc(t, b, c, d) {
        if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
    },
    // Elastic
    easeInElastic: function easeInElastic(t, b, c, d, a, p) {
        var s = void 0;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (typeof p == "undefined") p = d * .3;
        if (!a || a < Math.abs(c)) {
            s = p / 4;
            a = c;
        } else {
            s = p / (2 * Math.PI) * Math.asin(c / a);
        }
        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
    },
    easeOutElastic: function easeOutElastic(t, b, c, d, a, p) {
        var s = void 0;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (typeof p == "undefined") p = d * .3;
        if (!a || a < Math.abs(c)) {
            a = c;
            s = p / 4;
        } else {
            s = p / (2 * Math.PI) * Math.asin(c / a);
        }
        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;
    },
    easeInOutElastic: function easeInOutElastic(t, b, c, d, a, p) {
        var s = void 0;
        if (t == 0) return b;
        if ((t /= d / 2) == 2) return b + c;
        if (typeof p == "undefined") p = d * (.3 * 1.5);
        if (!a || a < Math.abs(c)) {
            a = c;
            s = p / 4;
        } else {
            s = p / (2 * Math.PI) * Math.asin(c / a);
        }
        if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
    },
    // Back
    easeInBack: function easeInBack(t, b, c, d, s) {
        if (typeof s == "undefined") s = 1.70158;
        return c * (t /= d) * t * ((s + 1) * t - s) + b;
    },
    easeOutBack: function easeOutBack(t, b, c, d, s) {
        if (typeof s == "undefined") s = 1.70158;
        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
    },
    easeInOutBack: function easeInOutBack(t, b, c, d, s) {
        if (typeof s == "undefined") s = 1.70158;
        if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;
        return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;
    },
    // Bounce
    easeInBounce: function easeInBounce(t, b, c, d) {
        return c - Tween.easeOutBounce(d - t, 0, c, d) + b;
    },
    easeOutBounce: function easeOutBounce(t, b, c, d) {
        if ((t /= d) < 1 / 2.75) {
            return c * (7.5625 * t * t) + b;
        } else if (t < 2 / 2.75) {
            return c * (7.5625 * (t -= 1.5 / 2.75) * t + .75) + b;
        } else if (t < 2.5 / 2.75) {
            return c * (7.5625 * (t -= 2.25 / 2.75) * t + .9375) + b;
        } else {
            return c * (7.5625 * (t -= 2.625 / 2.75) * t + .984375) + b;
        }
    },
    easeInOutBounce: function easeInOutBounce(t, b, c, d) {
        if (t < d / 2) {
            return Tween.easeInBounce(t * 2, 0, c, d) * .5 + b;
        } else {
            return Tween.easeOutBounce(t * 2 - d, 0, c, d) * .5 + c * .5 + b;
        }
    }
};

exports.default = Tween;

/***/ })
/******/ ]);
});